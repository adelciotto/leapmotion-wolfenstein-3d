Wolf.Sound=function(){function o(o){if(!d){for(var n=0;n<S.length;n++)if("probably"==Modernizr.audio[S[n]]){d=S[n];break}if(!d)for(var n=0;n<S.length;n++)if("maybe"==Modernizr.audio[S[n]]){d=S[n];break}}return o.split(".")[0]+"."+d}function n(){var o=new Audio;return E.push(o),o}function u(u,e,i,t,f,l,r,s){var a,A,M,d;p[f]||(p[f]=[]);for(var E=0;E<p[f].length;E++)if(p[f][E].ended||p[f][E].paused){a=p[f][E];break}a||(a=n(),a.src=o(f),p[f].push(a)),u&&e&&(A=(u.x-e.x)/Wolf.TILEGLOBAL,M=(u.y-e.y)/Wolf.TILEGLOBAL,d=A*A+M*M,l*=1/(1+d/50)),a.volume=l*Wolf.MASTER_VOLUME*(c?1:0),a.play()}function e(u){M||(M=n(),M.loop=!0);var e=o(u);A!=e&&(M.src=A=e,M.volume=Wolf.MUSIC_VOLUME*Wolf.MASTER_VOLUME*(_?1:0),M.play())}function i(){for(var o=0;o<E.length;o++)E[o].currentTime>0&&(E[o].currentTime=0,E[o].pause())}function t(){}function f(){return _}function l(){return c}function r(o){_="undefined"!=typeof o?o:!_,M&&(M.volume=Wolf.MUSIC_VOLUME*Wolf.MASTER_VOLUME*(_?1:0))}function s(o){M&&(o?M.pause():M.paused&&M.play())}function a(o){c="undefined"!=typeof o?o:!c}Wolf.setConsts({CHAN_AUTO:0,CHAN_WEAPON:1,CHAN_VOICE:2,CHAN_ITEM:3,CHAN_BODY:4,CHAN_NO_PHS_ADD:8,CHAN_RELIABLE:16,ATTN_NONE:0,ATTN_NORM:1,ATTN_IDLE:2,ATTN_STATIC:3,MAX_PLAYSOUNDS:128,MAX_CHANNELS:64,MUSIC_VOLUME:.8,MASTER_VOLUME:.6});var A,M,d,p={},E=[],c=!0,_=!1,S=["ogg","mp3"];return Modernizr.audio?{startSound:u,startMusic:e,stopAllSounds:i,isMusicEnabled:f,isSoundEnabled:l,toggleMusic:r,toggleSound:a,pauseMusic:s,init:t}:{startSound:Wolf.noop,startMusic:Wolf.noop,stopAllSounds:Wolf.noop,isMusicEnabled:Wolf.noop,isSoundEnabled:Wolf.noop,toggleMusic:Wolf.noop,toggleSound:Wolf.noop,pauseMusic:Wolf.noop,init:Wolf.noop}}();