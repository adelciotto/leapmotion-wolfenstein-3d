Wolf.Math=function(){function o(){var o,l,n,a,f;for(f=0;f<=Wolf.ANG_90;++f)o=Wolf.FINE2RAD(f),a=Math.sin(o),e[f]=e[Wolf.ANG_180-f]=e[f+Wolf.ANG_360]=a,e[Wolf.ANG_180+f]=e[Wolf.ANG_360-f]=-a;for(f=0;f<=e.length-Wolf.ANG_90;++f)_[f]=e[f+Wolf.ANG_90];for(f=0;f<=Wolf.ANG_360;++f)o=Wolf.FINE2RAD(f),f==Wolf.ANG_90||f==Wolf.ANG_270?(h[f]=Math.tan(Wolf.FINE2RAD(f-.5)),G[f]=Wolf.FLOATTILE*Math.tan(Wolf.FINE2RAD(f-.5))>>0):(h[f]=Math.tan(o),G[f]=Wolf.FLOATTILE*Math.tan(o)>>0),f==Wolf.ANG_0||f==Wolf.ANG_360?N[f]=Wolf.FLOATTILE/Math.tan(Wolf.FINE2RAD(f+.5))>>0:f==Wolf.ANG_180?N[f]=Wolf.FLOATTILE/Math.tan(Wolf.FINE2RAD(f-.5))>>0:f==Wolf.ANG_90||f==Wolf.ANG_270?N[f]=0:N[f]=Wolf.FLOATTILE/Math.tan(o)>>0;for(l=Math.tan(Wolf.DEG2RAD(t(75,Wolf.XRES,Wolf.YRES)/2))*(Wolf.XRES/Wolf.YRES),f=0;f<Wolf.XRES;++f)n=l*(-1+2*f/(Wolf.XRES-1)),d[f]=Wolf.RAD2FINE(Math.atan(n))>>0;return Wolf.Random.init(1),1}function t(o,t,l){if(1>o||o>179)throw Error("Bad fov: "+o);return 2*Wolf.RAD2DEG(Math.atan(l/(t/Math.tan(o/360*Math.PI))))}function l(o){return o>Wolf.ANG_360&&(o%=Wolf.ANG_360),o<Wolf.ANG_0&&(o=Wolf.ANG_360- -o%Wolf.ANG_360),o}function n(o){return o=Wolf.Angle.normalize(o),o<Math.PI/2?M:o<Math.PI?u:o<3*Math.PI/2?I:E}function a(o){return o=Wolf.Angle.normalize(o+Math.PI/4),o<Math.PI/2?s:o<Math.PI?P:o<3*Math.PI/2?R:T}function f(o){return o=Wolf.Angle.normalize(o+Math.PI/12),o<=Math.PI/4?c:o<Math.PI/2?F:o<=3*Math.PI/4?D:o<Math.PI?L:o<=5*Math.PI/4?m:o<3*Math.PI/2?S:o<=7*Math.PI/4?b:p}function r(o,t,l){return Math.abs(o*e[l]-t*_[l]>>0)}function W(o,t,l){return o*_[l]+t*e[l]>>0}function i(o,t,l,n){var a=Math.atan2(t-n,o-l);return Wolf.Angle.normalize(a)}function A(o,t,l){return Math.max(t,Math.min(o,l))}var e=[],_=[],h=[],N=[],G=[],d=[],M=0,u=1,I=2,E=3,s=0,P=1,R=2,T=3,g=4,c=0,F=1,D=2,L=3,m=4,S=5,b=6,p=7,v=8,w=[1,0,-1,0,0],x=[0,1,0,-1,0],z=[1,1,0,-1,-1,-1,0,1,0],O=[0,1,1,1,0,-1,-1,-1,0],X=[2,3,0,1,4],Y=[4,5,6,7,0,1,2,3,8],y=[0,2,4,6,8],C=[[v,v,F,v,v,v,p,v,v],[v,v,v,v,v,v,v,v,v],[F,v,v,v,L,v,v,v,v],[v,v,v,v,v,v,v,v,v],[v,v,L,v,v,v,S,v,v],[v,v,v,v,v,v,v,v,v],[p,v,v,v,S,v,v,v,v],[v,v,v,v,v,v,v,v,v],[v,v,v,v,v,v,v,v,v]],B=([[g,R,g][P],[g,s,g]],[Wolf.ANG_0,Wolf.ANG_45,Wolf.ANG_90,Wolf.ANG_135,Wolf.ANG_180,Wolf.ANG_225,Wolf.ANG_270,Wolf.ANG_315,Wolf.ANG_0]);return dir4angle=[Wolf.ANG_0,Wolf.ANG_90,Wolf.ANG_180,Wolf.ANG_270,Wolf.ANG_0],o(),{calcFov:t,normalizeAngle:l,getQuadrant:n,get4dir:a,get8dir:f,point2LineDist:r,lineLen2Point:W,transformPoint:i,clamp:A,SinTable:e,CosTable:_,TanTable:h,XnextTable:N,YnextTable:G,ColumnAngle:d,dir4_east:s,dir4_north:P,dir4_west:R,dir4_south:T,dir4_nodir:g,dir8_east:c,dir8_northeast:F,dir8_north:D,dir8_northwest:L,dir8_west:m,dir8_southwest:S,dir8_south:b,dir8_southeast:p,dir8_nodir:v,dx4dir:w,dy4dir:x,dx8dir:z,dy8dir:O,dir4angle:dir4angle,dir8angle:B,dir4to8:y,opposite4:X,opposite8:Y,diagonal:C}}();