Wolf.Powerups=function(){function o(o,l){l.x=-1,l.y=-1}function l(o){o.state.numPowerups++;var l={x:-1,y:-1,type:0,sprite:null};return o.state.powerups[o.state.numPowerups-1]=l,l}function e(o){o.state.numPowerups=0,o.state.powerups=[]}function f(o,e,f,a){var t=l(o);t.sprite=Wolf.Sprites.getNewSprite(o),t.type=a,Wolf.Sprites.setPos(o,t.sprite,Wolf.TILE2POS(t.x=e),Wolf.TILE2POS(t.y=f),0),Wolf.Sprites.setTex(o,t.sprite,-1,n[a]),o.tileMap[e][f]|=Wolf.POWERUP_TILE}function a(o,l,e){var f=["Gold","Silver","?","?"];switch(e){case Wolf.pow_key1:case Wolf.pow_key2:case Wolf.pow_key3:case Wolf.pow_key4:e-=Wolf.pow_key1,Wolf.Player.giveKey(l,e),Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/012.wav",1,Wolf.ATTN_NORM,0),Wolf.Game.notify(f[e]+" key");break;case Wolf.pow_cross:Wolf.Player.givePoints(l,100),Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/035.wav",1,Wolf.ATTN_NORM,0),++o.state.foundTreasure==o.state.totalTreasure&&Wolf.Game.notify("You found the last treasure!");break;case Wolf.pow_chalice:Wolf.Player.givePoints(l,500),Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/036.wav",1,Wolf.ATTN_NORM,0),++o.state.foundTreasure==o.state.totalTreasure&&Wolf.Game.notify("You found the last treasure!");break;case Wolf.pow_bible:Wolf.Player.givePoints(l,1e3),Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/037.wav",1,Wolf.ATTN_NORM,0),++o.state.foundTreasure==o.state.totalTreasure&&Wolf.Game.notify("You found the last treasure!");break;case Wolf.pow_crown:Wolf.Player.givePoints(l,5e3),Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/045.wav",1,Wolf.ATTN_NORM,0),++o.state.foundTreasure==o.state.totalTreasure&&Wolf.Game.notify("You found the last treasure!");break;case Wolf.pow_gibs:if(!Wolf.Player.giveHealth(l,1,11))return!1;Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/061.wav",1,Wolf.ATTN_NORM,0);break;case Wolf.pow_alpo:if(!Wolf.Player.giveHealth(l,4,0))return!1;Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/033.wav",1,Wolf.ATTN_NORM,0);break;case Wolf.pow_food:if(!Wolf.Player.giveHealth(l,10,0))return!1;Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/033.wav",1,Wolf.ATTN_NORM,0);break;case Wolf.pow_firstaid:if(!Wolf.Player.giveHealth(l,25,0))return!1;Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/034.wav",1,Wolf.ATTN_NORM,0);break;case Wolf.pow_clip:if(!Wolf.Player.giveAmmo(l,Wolf.AMMO_BULLETS,8))return!1;Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/031.wav",1,Wolf.ATTN_NORM,0);break;case Wolf.pow_clip2:if(!Wolf.Player.giveAmmo(l,Wolf.AMMO_BULLETS,4))return!1;Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/031.wav",1,Wolf.ATTN_NORM,0);break;case Wolf.pow_25clip:if(!Wolf.Player.giveAmmo(l,Wolf.AMMO_BULLETS,25))return!1;Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/031.wav",1,Wolf.ATTN_NORM,0);break;case Wolf.pow_machinegun:Wolf.Player.giveWeapon(l,Wolf.WEAPON_AUTO),Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/030.wav",1,Wolf.ATTN_NORM,0),Wolf.Game.notify("Machinegun");break;case Wolf.pow_chaingun:Wolf.Player.giveWeapon(l,Wolf.WEAPON_CHAIN),Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/038.wav",1,Wolf.ATTN_NORM,0),Wolf.Game.notify("Chaingun"),l.faceCount=-100,l.faceGotGun=!0;break;case Wolf.pow_fullheal:Wolf.Player.giveHealth(l,99,99),Wolf.Player.giveAmmo(l,Wolf.AMMO_BULLETS,25),Wolf.Player.giveLife(l),++o.state.foundTreasure==o.state.totalTreasure?Wolf.Game.notify("You found the last treasure!"):Wolf.Game.notify("Full Heal"),Wolf.Sound.startSound(null,null,0,Wolf.CHAN_ITEM,"lsfx/034.wav",1,Wolf.ATTN_NORM,0),Wolf.log("Extra life!");break;default:Wolf.log("Warning: Unknown item type: "+e)}return Wolf.Game.startBonusFlash(),!0}function t(l,e,f,t){var n,W,r=!1,u=!1;for(n=0;n<l.state.numPowerups;n++)W=l.state.powerups[n],W.x==f&&W.y==t&&(a(l,e,W.type)?(u=!0,Wolf.Sprites.remove(l,W.sprite),o(l,W)):r=!0);r?l.tileMap[f][t]|=Wolf.POWERUP_TILE:l.tileMap[f][t]&=~Wolf.POWERUP_TILE}Wolf.setConsts({pow_gibs:0,pow_gibs2:1,pow_alpo:2,pow_firstaid:3,pow_key1:4,pow_key2:5,pow_key3:6,pow_key4:7,pow_cross:8,pow_chalice:9,pow_bible:10,pow_crown:11,pow_clip:12,pow_clip2:13,pow_machinegun:14,pow_chaingun:15,pow_food:16,pow_fullheal:17,pow_25clip:18,pow_spear:19,pow_last:20});var n=[Wolf.SPR_STAT_34,Wolf.SPR_STAT_38,Wolf.SPR_STAT_6,Wolf.SPR_STAT_25,Wolf.SPR_STAT_20,Wolf.SPR_STAT_21,Wolf.SPR_STAT_20,Wolf.SPR_STAT_20,Wolf.SPR_STAT_29,Wolf.SPR_STAT_30,Wolf.SPR_STAT_31,Wolf.SPR_STAT_32,Wolf.SPR_STAT_26,Wolf.SPR_STAT_26,Wolf.SPR_STAT_27,Wolf.SPR_STAT_28,Wolf.SPR_STAT_24,Wolf.SPR_STAT_33,Wolf.SPR_STAT_49,Wolf.SPR_STAT_51];return{spawn:f,reset:e,pickUp:t}}();