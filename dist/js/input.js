Wolf.Input=function(){function n(){var n=($("#game"),$("#main"));$("#game .renderer");h||(h=[],$(document).on("keydown",function(n){if(n.preventDefault(),Wolf.Game.isPlaying()&&(h[n.keyCode]=!0,C[n.keyCode]))for(var e=0,o=C[n.keyCode].length;o>e;e++)C[n.keyCode][e](n)}).on("keyup",function(n){n.preventDefault(),Wolf.Game.isPlaying()&&(h[n.keyCode]=!1)}).on("keypress",function(n){n.preventDefault()}).on("contextmenu",function(n){n.preventDefault()}).on("onrightclick",function(n){n.preventDefault()}).on("mousedown",function(n){window.focus(),n.preventDefault()}).on("mouseup",function(n){n.preventDefault()}),$("#game").on("mousedown",function(n){k?1==n.which?E=!0:3==n.which&&(W=!0):window.focus(),n.preventDefault()}).on("mouseup",function(n){k&&(1==n.which?E=!1:3==n.which&&(W=!1)),n.preventDefault()}).on("mousemove",function(e){if(k){if(m())"webkitMovementX"in e.originalEvent?(P+=e.originalEvent.webkitMovementX,F+=e.originalEvent.webkitMovementY):"mozMovementX"in e.originalEvent?(P+=e.originalEvent.mozMovementX,F+=e.originalEvent.mozMovementY):"movementX"in e.originalEvent&&(P+=e.originalEvent.movementX,F+=e.originalEvent.movementY);else if(Wolf.Game.isFullscreen())y=e.pageX/window.innerWidth,D=e.pageY/window.innerHeight;else{var o=n.offset();y=(e.pageX-o.left)/n.width(),D=(e.pageY-o.top)/n.height()}e.preventDefault()}}),$(window).on("blur",function(n){k=!1,e()}),$(window).on("focus",function(n){k=!0})),Wolf.LeapController.init(),Wolf.LeapController.on(Wolf.LeapListeners.OnAiming,function(n,e){M+=n}),Wolf.LeapController.on(Wolf.LeapListeners.OnThumbContracting,function(n,e){w=n}),Wolf.LeapController.on(Wolf.LeapListeners.OnClenching,function(n,e){L=n})}function e(){o(),h=[]}function o(){E=!1,W=!1,y=D=.5}function t(n,e){var o=Wolf.Keys[n];C[o]||(C[o]=[]),C[o].push(e)}function i(n){for(var e=0;e<n.length;e++){var o=n[e];if(h[Wolf.Keys[o]])return!0}return!1}function r(n){for(var e=0;e<n.length;e++){var o=n[e];h[Wolf.Keys[o]]=!1}return!1}function u(){return E}function f(){return W}function l(){return 0>y||y>1||0>D||D>1?null:{x:2*(y-.5),y:2*(D-.5)}}function a(){var n=P,e=F;return P=0,F=0,{x:n/screen.width,y:e/screen.height}}function c(){var n=M;return M=0,n/Wolf.MAX_XVEL}function v(){return w.bottom<=Wolf.MAX_THUMBANGLE&&w.bottom>0||w.top<=Wolf.MAX_THUMBANGLE-.25&&w.top>0}function s(){return L>=Wolf.MIN_CLENCH}function g(){var n=navigator.pointer||navigator.webkitPointer||navigator.mozPointer||navigator.msPointer||navigator.oPointer;return n}function m(){var n=g();return n&&n.isLocked&&n.isLocked()}function p(){var n=g();n&&Wolf.Game.isFullscreen()&&n.lock($("#game")[0],function(n){Wolf.log("Pointer locked")},function(n){Wolf.log("Could not lock pointer: "+n)})}function d(){var n=g();n&&n.unlock($("#game")[0])}Wolf.setConsts({MAX_XVEL:120,MAX_THUMBANGLE:.4,MIN_CLENCH:.7});var h,M=0,w={},L=0,E=!1,W=!1,C=[],k=!1,y=-1,D=-1,P=0,F=0;return{init:n,reset:e,resetMouse:o,checkKeys:i,clearKeys:r,bindKey:t,leftMouseDown:u,rightMouseDown:f,getMouseCoords:l,getMouseMovement:a,getHandMovement:c,thumbContracting:v,handClenching:s,isPointerLocked:m,lockPointer:p,unlockPointer:d}}(),Wolf.Keys={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,SHIFT:16,CTRL:17,ALT:18,ESC:27,HOME:36,END:35,DEL:46,INS:45,PGUP:33,PGDN:34,SLASH:111,MINUS:109,PLUS:107,COMMA:188,PERIOD:190,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:58,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};